<!doctype html>

<!--Template for card component -->
<script type="text/x-template" id="card-template">
	<div :class="classObj" v-on:click="toggleSelected">
		<span class="rank">{{ rankDisplay }}</span>
		<span class="suit">
			<!-- We use the raw html to display the normal suits properly. -->
			<div v-html="suitDisplay"></div>
		</span>
	</div>
</script>

<html lang="en">
<head>
	<meta charset="utf-8">

	<title>80 Points</title>
	<meta name="description" content="80 Points">
	<link rel="stylesheet" href="css/cards.css?v=1.0">
	<link rel="stylesheet" href="css/styles.css?v=1.0">
</head>

<body>
	<h2>80 Points</h2>
	<div id="app">
		<div class="playerInfo" v-for="(player, index) in players">
			<p>
				<template v-if="turn == index">
					<em>{{ player }}</em>
				</template>
				<template v-else>
					{{ player }}
				</template>
			</p>
			<div class="playingCards fourColours">
				<ul class="hand">
					<li v-for="card in board[index]">
						<card :suit="card.suit" :rank="card.value"
							:trump-suit="trumpSuit" :trump-rank="trumpRank">
						</card>
					</li>
				</ul>
			</div>
		</div>
		<template v-if="status == 'dealing'">
			<div>
				<h3>Declare a Suit:</h3>
				<div v-for="(suitName, suit) in suits">
					<button
						v-on:click="declareSuit(suit)"
						:disabled="!(suit in declarableSuits)"
						>
						{{ suitName }}
					</button>
				</div>
			</div>
		</template>
		<template v-if="declaration">
			<div>
				<h3>Declared:</h3>
				<div class="playingCards fourColours">
					<ul class="hand">
						<li v-for="card in declaration.cards">
							<card :suit="card.suit" :rank="card.value"
								:trump-suit="trumpSuit" :trump-rank="trumpRank">
							</card>
						</li>
					</ul>
				</div>
			</div>
		</template>
		<div class="playerHand">
			<h3>Hand</h3>
			<template v-if="canSetBottom">
				<button v-on:click="setBottom">Set Bottom</button>
			</template>
			<template v-if="canPlay">
				<button v-on:click="play">Play</button>
			</template>
		</div>
		<div class="playingCards fourColours">
			<ul class="hand">
				<li v-for="card in cards">
					<card :suit="card.suit" :rank="card.value"
						:selected="card.selected" v-on:update-selected="val => card.selected = val"
						:trump-suit="trumpSuit" :trump-rank="trumpRank">
					</card>
				</li>
			</ul>
		</div>
		<h3>Trump Suit:</h3>
		<div v-for="(suitName, suit) in suits">
			<input type="radio" :id="suit" :value="suit.charAt(0).toLowerCase()" v-model="trumpSuit">
			<label :for="suit">{{ suitName }}</label>
		</div>
		<h3>Trump Rank:</h3>
		<div v-for="rank in ranks">
			<input type="radio" :id="rank" :value="rank" v-model="trumpRank">
			<label :for="rank">{{ rank }}</label>
		</div>
	</div>

	<script src="js/socket.io.js"></script>
	<script src="https://unpkg.com/vue"></script>
	<script src="js/app.js"></script>
</body>
</html>
